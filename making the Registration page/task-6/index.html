<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body></body>
</html>
<script>
  const posts = [
    {
      title: "post one",
      body: "this is post one",
      createdtime: new Date().getTime(),
    },

    {
      title: "post two",
      body: "this is post two",
      createdtime: new Date().getTime(),
    },

    
  ];

  const getposts=()=> {

    setTimeout(() => {

      let output = "";

      posts.forEach((post, index) => {
        output += `<li>${post.title} - last updated ${
          (new Date().getTime() - post.createdtime) / 1000
        } seconds ago</li>`;
      });

      document.body.innerHTML = output;
    }, 1000);
  }

  const deletePost=()=>{
    return new Promise((resolve,reject)=>{

        setTimeout(() => {
            if(posts.length>0){
                let lastElement=posts.pop();
                resolve(lastElement);
            }else{
                reject('Posts Arrya is Empty')
            }
        },1000)
    })
  }

  const createpost=(post)=> {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        posts.push(post);
         const error = false;

        if (!error) {
          resolve();
        } else {
          reject("error: something went wrong");
        }
      }, 2000);
    });

  }

  const updateLastUserActivityTime=()=> {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        posts.createpost = new Date().getTime();
        resolve(posts.createpost);
      }, 1000);
    });
  }

  createpost({
    title: "post three",
    body: "this is post three",
    createdtime: new Date().getTime(),
  });

  updateLastUserActivityTime()
  .then(() => {
      getposts();

      deletePost().then(() => {
        getposts();

        deletePost().then(() => {
          getposts();

          deletePost().then(() => {
            getposts();

            deletePost()
              .then(() => {})

              .catch((err) => {
                console.log("inside catch block", err);
              });
          });
        });
      });
    });
</script>
